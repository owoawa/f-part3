(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t.n(r),o=t(3),s=t(2),i=t(4),a=t.n(i),u="/api/persons",d=function(){return a.a.get(u).then((function(e){return e.data}))},b=function(e){return a.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.data}))},l=function(e){return a.a.post(u,e).then((function(e){return e.data}))},j=function(e,n){return a.a.put("".concat(u,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),h=function(e){var n=e.setNewFilter;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{onChange:function(e){return n(e.target.value)}})]})},m=t(8),p=function(e){var n=e.persons,t=e.setPersons,r=e.setMessage,c=Object(s.useState)(""),i=Object(o.a)(c,2),a=i[0],u=i[1],d=Object(s.useState)(""),b=Object(o.a)(d,2),h=b[0],p=b[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:a,number:h};if(n.reduce((function(e,n){return n.name===c.name||e}),!1)){if(window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))){var o=n.find((function(e){return e.name===c.name})),s=Object(m.a)(Object(m.a)({},o),{},{number:c.number});j(s.id,s).then((function(e){return t(n.map((function(n){return n.id!==s.id?n:e})))}))}}else l(c).then((function(e){return t(n.concat(e))})),r({message:"Added ".concat(c.name),isIt:!0}),setTimeout((function(){r({message:null,isIt:null})}),3e3);u(""),p("")},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{onChange:function(e){return u(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{onChange:function(e){return p(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.persons,t=e.newFilter,r=e.setPersons,c=e.setMessage;return Object(f.jsx)("div",{children:n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())?Object(f.jsxs)("p",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return t=e,void(window.confirm("Delete ".concat(t.name,"?"))?b(t.id).then((function(e){return r(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){return c({message:"Information of ".concat(t.name," has already been removed from server"),isIt:!1})})):console.log("no"));var t},children:" delete "})]},e.id):""}))})},g=function(e){var n=e.message,t=e.isIt;return console.log(t),null===n?null:t?Object(f.jsx)("p",{style:{background:"lightgray",color:"green",fontSize:"25px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n}):Object(f.jsx)("p",{style:{background:"lightgray",color:"red",fontSize:"25px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},x=function(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(s.useState)(""),i=Object(o.a)(c,2),a=i[0],u=i[1],b=Object(s.useState)({message:null,isIt:!0}),l=Object(o.a)(b,2),j=l[0],m=l[1];return Object(s.useEffect)((function(){d().then((function(e){return r(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(g,{message:j.message,isIt:j.isIt}),Object(f.jsx)(h,{setNewFilter:u}),Object(f.jsx)("h2",{children:" add a new "}),Object(f.jsx)(p,{persons:t,setPersons:r,setMessage:m}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(O,{persons:t,newFilter:a,setPersons:r,setMessage:m})]})};c.a.render(Object(f.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.241674af.chunk.js.map