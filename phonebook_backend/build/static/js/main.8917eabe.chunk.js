(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),o=t.n(r),c=t(3),s=t(2),a=t(4),i=t.n(a),u="/api/persons",d=function(){return i.a.get(u).then((function(e){return e.data}))},l=function(e){return i.a.delete("".concat(u,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return i.a.post(u,e).then((function(e){return e.data}))},j=function(e,n){return i.a.put("".concat(u,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),h=function(e){var n=e.setNewFilter;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{onChange:function(e){return n(e.target.value)}})]})},m=t(8),p=function(e){var n=e.persons,t=e.setPersons,r=e.setMessage,o=Object(s.useState)(""),a=Object(c.a)(o,2),i=a[0],u=a[1],d=Object(s.useState)(""),l=Object(c.a)(d,2),h=l[0],p=l[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={name:i,number:h};if(n.reduce((function(e,n){return n.name===o.name||e}),!1)){if(window.confirm("".concat(o.name," is already added to phonebook, replace the old number with a new one?"))){var c=n.find((function(e){return e.name===o.name})),s=Object(m.a)(Object(m.a)({},c),{},{number:o.number});j(s.id,s).then((function(e){return t(n.map((function(n){return n.id!==s.id?n:e})))}))}}else b(o).then((function(e){return t(n.concat(e))})).catch((function(e){return console.log(e.response.data)})),r({message:"Added ".concat(o.name),isIt:!0}),setTimeout((function(){r({message:null,isIt:null})}),3e3);u(""),p("")},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{onChange:function(e){return u(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{onChange:function(e){return p(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.persons,t=e.newFilter,r=e.setPersons,o=e.setMessage;return Object(f.jsx)("div",{children:n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())?Object(f.jsxs)("p",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return t=e,void(window.confirm("Delete ".concat(t.name,"?"))?l(t.id).then((function(e){return r(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){return o({message:"Information of ".concat(t.name," has already been removed from server"),isIt:!1})})):console.log("no"));var t},children:" delete "})]},e.id):""}))})},g=function(e){var n=e.message,t=e.isIt;return console.log(t),null===n?null:t?Object(f.jsx)("p",{style:{background:"lightgray",color:"green",fontSize:"25px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n}):Object(f.jsx)("p",{style:{background:"lightgray",color:"red",fontSize:"25px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},x=function(){var e=Object(s.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(s.useState)(""),a=Object(c.a)(o,2),i=a[0],u=a[1],l=Object(s.useState)({message:null,isIt:!0}),b=Object(c.a)(l,2),j=b[0],m=b[1];return Object(s.useEffect)((function(){d().then((function(e){return r(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(g,{message:j.message,isIt:j.isIt}),Object(f.jsx)(h,{setNewFilter:u}),Object(f.jsx)("h2",{children:" add a new "}),Object(f.jsx)(p,{persons:t,setPersons:r,setMessage:m}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(O,{persons:t,newFilter:i,setPersons:r,setMessage:m})]})};o.a.render(Object(f.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.8917eabe.chunk.js.map